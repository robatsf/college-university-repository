{"version":3,"file":"index-CY4MKKcl.js","sources":["../../src/components/LogoutDialog.tsx","../../src/components/CustomTopBar.tsx","../../src/utils/tokenManager.ts","../../src/dataProvider.ts","../../src/departemnt_head/components/DepartmentFileCreateToolbar.tsx","../../src/departemnt_head/components/DepartmentFileCreate.tsx","../../src/departemnt_head/components/DepartmentFileEdit.tsx","../../src/departemnt_head/components/DepartmentFileFilter.tsx","../../src/departemnt_head/components/DepartmentFileList.tsx","../../src/departemnt_head/components/FileViewer.tsx","../../src/departemnt_head/Approvals.tsx","../../src/libriance/Updatepassword.tsx","../../src/departemnt_head/Updatepassword.tsx","../../src/departemnt_head/components/DepartmentFileShow.tsx","../../src/libriance/components/useDepartments.ts","../../src/libriance/components/LibrarianFilter.tsx","../../src/libriance/components/LibrarianList.tsx","../../src/libriance/components/LibrarianToolbar.tsx","../../src/libriance/components/LibrarianForm.tsx","../../src/libriance/components/LibrarianCreate.tsx","../../src/libriance/components/LibrarianEdit.tsx","../../src/libriance/components/Librarianshow.tsx","../../src/layout/CustomLayout.tsx","../../src/components/StatCard.tsx","../../src/components/WelcomeCard.tsx","../../src/utils/token.ts","../../src/libriance/LibrarianDashboard.tsx","../../src/departemnt_head/DepartmentDashboard.tsx","../../src/App.tsx","../../src/index.tsx"],"sourcesContent":["// src/components/LogoutDialog.tsx\nimport { \n  Dialog, \n  DialogTitle, \n  DialogContent, \n  DialogActions, \n  Button, \n  Typography \n} from '@mui/material';\n\nexport const LogoutDialog = ({ open, onClose, onConfirm }) => (\n  <Dialog \n    open={open} \n    onClose={onClose}\n    sx={{\n      '& .MuiDialog-paper': {\n        borderRadius: 2,\n        padding: 2,\n      },\n      '& .MuiBackdrop-root': {\n        backgroundColor: 'rgba(0, 0, 0, 0.7)',\n        backdropFilter: 'blur(4px)',\n      },\n    }}\n  >\n    <DialogTitle>Confirm Logout</DialogTitle>\n    <DialogContent>\n      <Typography>Are you sure you want to logout?</Typography>\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={onClose} color=\"primary\">\n        Cancel\n      </Button>\n      <Button onClick={onConfirm} color=\"error\" variant=\"contained\">\n        Logout\n      </Button>\n    </DialogActions>\n  </Dialog>\n);","// src/components/CustomTopBar.tsx\nimport React, { useState } from 'react';\nimport { \n  AppBar, \n  Box, \n  IconButton, \n  Toolbar, \n  Typography, \n} from '@mui/material';\nimport { \n  LogOut, \n  Menu as MenuIcon, \n} from 'lucide-react';\nimport { LogoutDialog } from './LogoutDialog';\nimport { useSidebarState } from 'react-admin';\n\nexport const CustomTopBar = ({ role }) => {\n  const [logoutDialogOpen, setLogoutDialogOpen] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useSidebarState();\n\n  const handleLogout = () => {\n    localStorage.clear()\n    window.location.href = '/login';\n  };\n\n  return (\n    <>\n      <AppBar position=\"fixed\">\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"menu\"\n            sx={{ mr: 2 }}\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n          >\n            <MenuIcon />\n          </IconButton>\n          \n          <img\n            src=\"../public/hu.jpeg\"\n            alt=\"HUDC Logo\"\n            style={{\n              height: 40,\n              marginRight: 16,\n              borderRadius: 20\n            }}\n          />\n\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n          HUDC IRS\n          </Typography>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <IconButton \n              color=\"inherit\" \n              onClick={() => setLogoutDialogOpen(true)}\n            >\n              <LogOut \n                size={20} \n                color={role === 'librarian' ? \"#d32f2f\" : \"#1976d2\"} \n              />\n            </IconButton>\n          </Box>\n        </Toolbar>\n      </AppBar>\n\n      <LogoutDialog \n        open={logoutDialogOpen}\n        onClose={() => setLogoutDialogOpen(false)}\n        onConfirm={handleLogout}\n      />\n    </>\n  );\n};","// src/utils/tokenManager.ts\nimport {jwtDecode} from 'jwt-decode';\nimport { apibase } from '../dataProvider';\n\ninterface JWTPayload {\n  exp: number;\n  iat: number;\n  user_id: string;\n}\n\nclass TokenManager {\n  private static instance: TokenManager;\n  private refreshPromise: Promise<string | null> | null = null;\n\n  private constructor() {}\n\n  public static getInstance(): TokenManager {\n    if (!TokenManager.instance) {\n      TokenManager.instance = new TokenManager();\n    }\n    return TokenManager.instance;\n  }\n\n  private isTokenExpired(token: string): boolean {\n    try {\n      const decoded = jwtDecode<JWTPayload>(token);\n      const currentTime = Math.floor(Date.now() / 1000);\n      return decoded.exp <= currentTime + 30;\n    } catch {\n      return true;\n    }\n  }\n\n  private showErrorMessage(message: string, duration: number = 5000) {\n    // Create overlay background\n    const overlay = document.createElement('div');\n    overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.5);\n      backdrop-filter: blur(8px);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 9998;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    `;\n\n    // Create error message container\n    const errorDiv = document.createElement('div');\n    errorDiv.style.cssText = `\n      background-color: #ef4444;\n      color: white;\n      padding: 20px 40px;\n      border-radius: 12px;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n      text-align: center;\n      font-size: 16px;\n      font-weight: 500;\n      max-width: 400px;\n      width: 90%;\n      opacity: 0;\n      transform: translateY(20px);\n      transition: all 0.3s ease;\n    `;\n    errorDiv.textContent = message;\n\n    // Create countdown element\n    const countdownDiv = document.createElement('div');\n    countdownDiv.style.cssText = `\n      margin-top: 12px;\n      font-size: 14px;\n      opacity: 0.8;\n    `;\n    \n    // Add elements to DOM\n    overlay.appendChild(errorDiv);\n    errorDiv.appendChild(countdownDiv);\n    document.body.appendChild(overlay);\n\n    // Trigger animations\n    requestAnimationFrame(() => {\n      overlay.style.opacity = '1';\n      errorDiv.style.opacity = '1';\n      errorDiv.style.transform = 'translateY(0)';\n    });\n\n    // Start countdown\n    let timeLeft = Math.floor(duration / 1000);\n    const updateCountdown = () => {\n      countdownDiv.textContent = `Redirecting in ${timeLeft} seconds...`;\n    };\n    updateCountdown();\n\n    const countdownInterval = setInterval(() => {\n      timeLeft--;\n      updateCountdown();\n      if (timeLeft <= 0) clearInterval(countdownInterval);\n    }, 1000);\n\n    // Remove after duration\n    setTimeout(() => {\n      overlay.style.opacity = '0';\n      errorDiv.style.opacity = '0';\n      errorDiv.style.transform = 'translateY(20px)';\n      setTimeout(() => {\n        document.body.removeChild(overlay);\n      }, 300);\n    }, duration);\n  }\n\n  private redirectToLogin() {\n    setTimeout(() => {\n      window.location.href = '/login';\n    }, 5000);\n  }\n\n  private async refreshToken(): Promise<string | null> {\n    const refresh = localStorage.getItem('refresh_token')\n    if (!refresh) {\n      this.showErrorMessage('No refresh token found. Please login again.');\n      this.redirectToLogin();\n      return null;\n    }\n\n    try {\n      const response = await fetch(`${apibase}/token/refresh/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\"refresh_token\" : refresh }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Refresh failed');\n      }\n\n      const data = await response.json();\n      localStorage.setItem('access_token', data.data.access_token);\n      return data.data.access_token;\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n      localStorage.clear()\n      this.showErrorMessage('Session expired. Redirecting to login...');\n      this.redirectToLogin();\n      return null;\n    }\n  }\n\n  public async getValidToken(): Promise<string | null> {\n     const currentToken = localStorage.getItem('access_token')\n    \n    if (!currentToken) {\n      this.showErrorMessage('No access token found. Please login.');\n      this.redirectToLogin();\n      return null;\n    }\n\n    if (!this.isTokenExpired(currentToken)) {\n      return currentToken;\n    }\n\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n\n    this.refreshPromise = this.refreshToken();\n    const newToken = await this.refreshPromise;\n    this.refreshPromise = null;\n    \n    if (!newToken) {\n      this.showErrorMessage('Failed to refresh token. Please login again.');\n      this.redirectToLogin();\n    }\n    \n    return newToken;\n  }\n\n  public async getAuthHeaders(): Promise<string | null> {\n    const token = await this.getValidToken();\n    if (!token) {\n      return null;\n    }\n    return token;\n  }\n}\n\nexport const tokenManager = TokenManager.getInstance();","import { fetchUtils } from \"react-admin\";\nimport simpleRestProvider from \"ra-data-simple-rest\";\nimport { tokenManager } from \"./utils/tokenManager\";\nimport { json } from \"stream/consumers\";\nimport { NONAME } from \"dns\";\n\nexport const apibase = \"http://127.0.0.1:8000/api/files\"\nexport const api = \"http://127.0.0.1:8000/media/\"\nconst httpClient = fetchUtils.fetchJson;\n\n// Base provider\nconst baseDataProvider = simpleRestProvider(apibase);\n\nconst customDataProvider = {\n  ...baseDataProvider,\n  \n      create: async (resource, params) => {\n            return httpClient(`${apibase}/change-password/`, {\n                method: \"POST\",\n                body: JSON.stringify(params.data),\n                headers: new Headers({\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\",\n                    Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n                }),\n            }).then(({ json }) => ({ data: json }))\n              .catch(error => {\n                // Re-throw the error to be caught by React Admin's mutationOptions.onError\n                throw error;\n              });\n        \n        return baseDataProvider.create(resource, params);\n    },\n\n    getList: async (resource, params) => {\n      const resourceFilters = {\n        approvals: { url: \"list/\", filter: { approved: \"unapproved\", disapproval_reason : null } },\n        department_files: { url: \"list/\", filter: { approved: \"approved\" } },\n        libapprovals: { url: \"list/\", filter: { approved: false } },\n      };\n    \n      const filterConfig = resourceFilters[resource] || { url: resource, filter: {} };\n      const url = filterConfig.url;\n    \n      // Check if params.filter is null, undefined, or an empty object\n      const isFilterEmpty = !params.filter || Object.keys(params.filter).length === 0;\n      const filterParams = isFilterEmpty ? filterConfig.filter : params.filter;\n    \n      const query = {\n        ...filterParams\n      };\n    \n      const queryString = fetchUtils.queryParameters(query);\n    \n      const fullUrl = `${apibase}/${url}?${queryString}`;\n    \n      const options = {\n        headers: new Headers({\n          Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n        }),\n      }\n    \n      try {\n        const { json } = await httpClient(fullUrl, options);\n        return {\n          data: json,\n          total: json.length, // Assuming the backend returns the total count\n        };\n      } catch (error) {\n        console.error(\"Error fetching list:\", error);\n        throw new Error(\"Failed to fetch list\");\n      }\n    },\n\n  getdepartemnt: async (resource, params) => {\n    try {\n      const url = `${apibase}/${resource}/`;\n      const options = {\n        headers: new Headers({\n          Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n        }),\n      };\n      const res = await httpClient(url,options);\n      return JSON.parse(res.body);\n    } catch (error) {\n      console.error(\"Error fetching resource:\", error);\n      throw new Error(\"Failed to fetch resource\");\n    }\n  },\n\n\n\n  getOne: async (resource, params) => {\n    try {\n      const resourceFilters = {\n        department_files: { url: 'list/' },\n        libapprovals : {url : 'list/'},\n        approvals : {url :  'list/'}\n      };\n\n      const url = `${apibase}/${resourceFilters[resource].url}?id=${params.id}`;\n      const options = {\n        headers: new Headers({\n          Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n        }),\n      };\n\n      const { json } = await httpClient(url, options);\n\n      // Ensure the returned data includes all necessary fields\n      return { data: json[0] };\n    } catch (error) {\n      console.error('Error fetching resource:', error);\n      throw new Error('Failed to fetch resource');\n    }\n  },\n\n  createfile: async (resource, params) => {\n      const formData = new FormData();\n      formData.append(\"title\", params.data.title);\n      formData.append(\"author\", params.data.author);\n      formData.append(\"description\", params.data.description);\n      formData.append(\"file\", params.data.file.rawFile);\n      formData.append(\"department_id\", params.data?.departemnt_id);\n  \n      const token =  await tokenManager.getAuthHeaders()\n\n      return fetch(`${apibase + resource}`, {\n        method: \"POST\",\n        body: formData,\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }).then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Failed to upload the file\");\n        }\n        return response.json();\n      });\n  },\n\n  update: async (resource, params) => {\n    const url = `${apibase}/update/${params.id}/`; // Ensure your backend accepts this format\n    const formData = new FormData();\n    formData.append(\"title\", params.data.title);\n    formData.append(\"author\", params.data.author);\n    formData.append(\"description\", params.data.description);\n    formData.append(\"file\", params.data?.file?.rawFile);\n\n    return httpClient(url, {\n      method: \"PUT\",\n      body: formData,\n      headers: new Headers({\n        // Do not set Content-Type when using FormData\n        Accept: \"application/json\",\n        Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n      }),\n    }).then(({ json }) => ({ data: json }));\n  },\n\n  delete: async (resource, params) => {\n    const url = `${apibase}/delete/${params.id}/`;\n    return httpClient(url, {\n      method: \"DELETE\",\n      headers: new Headers({\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n      }),\n    }).then(({ json }) => ({ data: json }));\n  },\n  updateAppprove : async (resource,id,data) =>{\n    const url = `${apibase}/approval/${id}/`;\n    return httpClient(url, {\n      method: \"post\",\n      headers: new Headers({\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n      }\n    ),\n    body : JSON.stringify(data)\n   })\n  }\n};\n\n\n\nexport default customDataProvider;\n\n\n","// src/departemnt_head/components/DepartmentFileCreateToolbar.tsx\nimport React from \"react\";\nimport { Toolbar, SaveButton } from \"react-admin\";\n\nconst DepartmentFileCreateToolbar = (props) => (\n  <Toolbar {...props}>\n    <SaveButton label=\"Upload\" />\n  </Toolbar>\n);\n\nexport default DepartmentFileCreateToolbar;","// src/components/DepartmentFileCreate.tsx\nimport React from \"react\";\nimport { Create, SimpleForm, TextInput, FileInput, FileField, required, useNotify, useRedirect } from \"react-admin\";\nimport customDataProvider from \"../../dataProvider\";\nimport DepartmentFileCreateToolbar from \"./DepartmentFileCreateToolbar\";\n\nconst DepartmentFileCreate = () => {\n  const notify = useNotify();\n  const redirect = useRedirect();\n\n  const handleSubmit = async (data) => {\n    try {\n      await customDataProvider.createfile(\"/create/\", { data });\n      notify(\"Department file created successfully\", { type: \"success\" });\n      redirect(\"/department_files\");\n    } catch (error) {\n      notify(`Error: ${error.message}`, { type: \"error\" });\n    }\n  };\n\n  return (\n    <Create>\n      <SimpleForm onSubmit={handleSubmit} toolbar={<DepartmentFileCreateToolbar />}>\n        <TextInput source=\"title\" label=\"Title\" fullWidth validate={[required()]} />\n        <TextInput source=\"author\" label=\"Author Name\" fullWidth validate={[required()]} />\n        <TextInput source=\"department\" label=\"Department\" defaultValue=\"Default Department\" fullWidth disabled />\n        <TextInput source=\"description\" label=\"Project/Research Description\" multiline fullWidth validate={[required()]} />\n        <FileInput source=\"file\" label=\"Upload File\" accept={{ \"application/pdf\": [\".pdf\"]}} validate={[required()]}>\n          <FileField source=\"src\" title=\"title\" />\n        </FileInput>\n      </SimpleForm>\n    </Create>\n  );\n};\n\nexport default DepartmentFileCreate;","import React from \"react\";\nimport { \n  Edit, \n  SimpleForm, \n  TextInput, \n  FileInput, \n  FileField, \n  required, \n  useNotify, \n  useRedirect,  \n} from \"react-admin\";\nimport DepartmentFileCreateToolbar from \"./DepartmentFileCreateToolbar\";\nimport customDataProvider from \"../../dataProvider\";\n\nconst DepartmentFileEdit = (props) => {\n  const notify = useNotify();\n  const redirect = useRedirect();\n\n  const handleSubmit = async (data) => {\n    try {\n      await customDataProvider.update(\"department_files\", {\n        id: data.id, // Sending the ID for updating\n        data,\n      });\n      notify(\"Department file updated successfully\", { type: \"success\" });\n      redirect(\"/department_files\");\n    } catch (error) {\n      notify(`Error: ${error.message}`, { type: \"error\" });\n    }\n  };\n\n  return (\n    <Edit {...props}>\n      <SimpleForm toolbar={<DepartmentFileCreateToolbar />} onSubmit={handleSubmit}>\n        <TextInput source=\"title\" label=\"Title\" fullWidth validate={[required()]} />\n        <TextInput source=\"author\" label=\"Author Name\" fullWidth validate={[required()]} />\n        {/* <TextInput source=\"departemnt\" label=\"Department\" defaultValue=\"Default Department\" fullWidth disabled /> */}\n        <TextInput source=\"description\" label=\"Project/Research Description\" multiline fullWidth validate={[required()]} />\n        <FileInput \n          source=\"file\" \n          label=\"Upload File\" \n          accept={{\n            \"application/pdf\": [\".pdf\"], \n          }} \n        >\n          <FileField source=\"src\" title=\"title\" />\n        </FileInput>\n      </SimpleForm>\n    </Edit>\n  );\n};\n\nexport default DepartmentFileEdit;","import React from \"react\";\nimport { Filter, TextInput } from \"react-admin\";\n\nconst DepartmentFileFilter = (props) => (\n  <Filter {...props}>\n    <TextInput label=\"Search\" source=\"title\" alwaysOn />\n    <TextInput label=\"Author\" source=\"author\" />\n  </Filter>\n);\n\nexport default DepartmentFileFilter;\n","// src/components/DepartmentFileList.tsx\nimport React from \"react\";\nimport { \n  List, \n  Datagrid, \n  TextField, \n  EditButton, \n  DeleteButton,\n  useRecordContext \n} from \"react-admin\";\nimport { Tooltip, Typography } from \"@mui/material\";\nimport DepartmentFileFilter from \"./DepartmentFileFilter\";\n\n// Custom Description Field Component\nconst TruncatedDescriptionField = () => {\n  const record = useRecordContext();\n  if (!record) return null;\n\n  const description = record.description || '';\n  const truncatedText = description.length > 10 \n    ? `${description.substring(0, 10)}...` \n    : description;\n  \n  return (\n    <Tooltip \n      title={description} \n      placement=\"top\"\n      arrow\n      enterDelay={500}\n    >\n      <Typography \n        sx={{ \n          cursor: 'help',\n          '&:hover': { \n            textDecoration: 'underline',\n            color: 'primary.main'\n          }\n        }}\n      >\n        {truncatedText}\n      </Typography>\n    </Tooltip>\n  );\n};\n\nconst DepartmentFileList = () => (\n  <List \n    filters={<DepartmentFileFilter />}\n    sort={{ field: 'created_at', order: 'DESC' }}\n    perPage={25}\n  >\n    <Datagrid\n    >\n      <TextField source=\"title\" label=\"Title\" />\n      <TextField source=\"author\" label=\"Author\" />\n      <TruncatedDescriptionField source=\"description\" label=\"Description\" />\n      <EditButton />\n      <DeleteButton />\n    </Datagrid>\n  </List>\n);\n\nexport default DepartmentFileList;","import React from \"react\";\nimport { Box, Typography, Button, Dialog, IconButton, styled } from \"@mui/material\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport DownloadIcon from '@mui/icons-material/Download';\n\nconst ViewerDialog = styled(Dialog)(() => ({\n  \"& .MuiDialog-paper\": {\n    height: \"99vh\",\n    maxWidth: \"99vw\",\n    width: \"90vw\",\n    backgroundColor: \"#f5f5f5\",\n  },\n}));\n\nconst ViewerHeader = styled(Box)(() => ({\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  padding: \"8px 16px\",\n  backgroundColor: \"#fff\",\n  borderBottom: \"1px solid #e0e0e0\",\n}));\n\nconst ViewerContent = styled(Box)(() => ({\n  height: \"calc(90vh - 64px)\",\n  overflow: \"auto\",\n  padding: \"16px\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  backgroundColor: \"#f5f5f5\",\n}));\n\ninterface FileViewerProps {\n  open: boolean;\n  onClose: () => void;\n  fileUrl: string | null;\n  fileName: string | null;\n}\n\nconst FileViewer: React.FC<FileViewerProps> = ({\n  open,\n  onClose,\n  fileUrl,\n  fileName,\n}) => {\n  const handleDownload = () => {\n    if (!fileUrl) return;\n    const link = document.createElement(\"a\");\n    link.href = fileUrl;\n    link.download = fileName || \"download\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  return (\n    <ViewerDialog open={open} onClose={onClose}>\n      <ViewerHeader>\n        <Typography variant=\"h6\">{fileName || \"Document\"}</Typography>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <IconButton \n            onClick={handleDownload}\n            title=\"Download\"\n            sx={{ \n              display: 'flex', \n              alignItems: 'center', \n              gap: 0.5 \n            }}\n          >\n            <DownloadIcon />\n            <Typography variant=\"button\">Download</Typography>\n          </IconButton>\n          <IconButton \n            onClick={onClose}\n            size=\"small\"\n            sx={{ ml: 1 }}\n            title=\"Close\"\n          >\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </ViewerHeader>\n      <ViewerContent>\n        {fileUrl ? (\n          <iframe\n            src={`${fileUrl}#toolbar=0&navpanes=0&view=FitH&zoom=50`}\n            title=\"PDF Viewer\"\n            style={{\n              width: \"100%\",\n              height: \"100%\",\n              border: \"none\",\n              WebkitTouchCallout: \"none\",\n              userSelect: \"none\",\n              \"-webkit-user-select\": \"none\",\n              \"-moz-user-select\": \"none\",\n              \"-ms-user-select\": \"none\",\n              overflow: \"auto\",\n            }}\n            onContextMenu={(e) => e.preventDefault()}\n          />\n        ) : (\n          <Typography>No file URL provided.</Typography>\n        )}\n      </ViewerContent>\n    </ViewerDialog>\n  );\n};\n\nexport default FileViewer;","import React, { useState } from \"react\";\nimport { \n  Show, \n  SimpleShowLayout, \n  TextField, \n  DateField, \n  Button, \n  TopToolbar, \n  useRecordContext, \n  useNotify,\n  useRefresh,\n  List,\n  Datagrid,\n  ShowButton,\n  Filter,\n  TextInput,\n  useRedirect\n} from \"react-admin\";\nimport { Eye, FileText, User, Calendar, Check, X } from \"lucide-react\";\nimport { \n  Typography, \n  Box, \n  Divider, \n  styled, \n  Dialog, \n  DialogTitle, \n  DialogContent, \n  DialogActions, \n  TextField as MuiTextField \n} from \"@mui/material\";\nimport FileViewer from \"./components/FileViewer\";\nimport customDataProvider, { apibase } from \"../dataProvider\";\nimport { tokenManager } from \"../utils/tokenManager\";\n\n// Types\ninterface DisapprovalDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onConfirm: (reason: string) => void;\n}\n\ninterface ApprovalButtonProps {\n  type: 'approved' | 'disapproved';\n}\n\n// Styled Components\nconst SectionTitle = styled(Typography)({\n  display: \"flex\",\n  alignItems: \"center\",\n  gap: \"8px\",\n  fontWeight: \"bold\",\n  marginBottom: \"16px\",\n  marginTop: \"16px\",\n});\n\nconst InfoRow = styled(Box)({\n  display: \"flex\",\n  gap: \"32px\",\n  marginBottom: \"16px\",\n  alignItems: \"center\",\n});\n\n// Filter Component\nconst ApprovalFilter = (props) => (\n  <Filter {...props}>\n    <TextInput label=\"Search\" source=\"title\" alwaysOn />\n    <TextInput label=\"Author\" source=\"author\" />\n    <TextInput label=\"Year\" source=\"year\" />\n  </Filter>\n);\n\n// Disapproval Dialog Component\nconst DisapprovalDialog: React.FC<DisapprovalDialogProps> = ({ open, onClose, onConfirm }) => {\n  const [reason, setReason] = useState(\"\");\n\n  const handleConfirm = () => {\n    onConfirm(reason);\n    setReason(\"\");\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\n      <DialogTitle>Why are you disapproving this file?</DialogTitle>\n      <DialogContent>\n        <MuiTextField\n          autoFocus\n          margin=\"dense\"\n          label=\"Reason for disapproval\"\n          fullWidth\n          multiline\n          rows={4}\n          value={reason}\n          onChange={(e) => setReason(e.target.value)}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"inherit\">\n          Cancel\n        </Button>\n        <Button onClick={handleConfirm} color=\"primary\" disabled={!reason.trim()}>\n          Confirm Disapproval\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\n// Approval Button Component\nconst ApprovalButton: React.FC<ApprovalButtonProps> = ({ type }) => {\n  const record = useRecordContext();\n  const notify = useNotify();\n  const refresh = useRefresh();\n  const redirect = useRedirect();\n  const [loading, setLoading] = useState(false);\n  const [openDisapprovalDialog, setOpenDisapprovalDialog] = useState(false);\n\n  if (!record) return null;\n\n  const handleApproval = () => {\n    if (type === 'disapproved') {\n      setOpenDisapprovalDialog(true);\n    } else {\n      handleConfirm();\n    }\n  };\n\n  const handleConfirm = async (reason?: string) => {\n    setLoading(true);\n    try {\n      const updateData = {\n        status: type,\n        ...(reason && { reason: reason })\n      };\n  \n      const response = await customDataProvider.updateAppprove(\n        'approvals',\n        record.id,\n        updateData\n      );\n  \n      if (response.status === 200) {\n        notify(`File ${type === 'approved' ? 'approved' : 'disapproved'} successfully`, { type: 'success' });\n        refresh();\n        redirect('list', 'approvals');\n      } else {\n        notify(`Error: ${response.statusText}`, { type: 'error' });\n      }\n    } catch (error) {\n      notify(`Error: ${error instanceof Error ? error.message : 'Unknown error occurred'}`, { type: 'error' });\n    } finally {\n      setLoading(false);\n      setOpenDisapprovalDialog(false);\n    }\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color={type === 'approved' ? 'success' : 'error'}\n        onClick={handleApproval}\n        disabled={loading}\n        startIcon={type === 'approved' ? <Check size={16} /> : <X size={16} />}\n      >\n        {type === 'approved' ? 'Approve' : 'Reject'}\n      </Button>\n\n      <DisapprovalDialog\n        open={openDisapprovalDialog}\n        onClose={() => setOpenDisapprovalDialog(false)}\n        onConfirm={handleConfirm}\n      />\n    </>\n  );\n};\n\n// List Component\nexport const ApprovalList = () => (\n  <List filters={<ApprovalFilter />}>\n    <Datagrid>\n      <TextField source=\"title\" />\n      <TextField source=\"author\" />\n      <TextField source=\"description\" label=\"Description\" />\n      <TextField source=\"approved\" label=\"Approval State\"/>\n      <ShowButton label=\"View Details\" icon={<Eye />} />\n    </Datagrid>\n  </List>\n);\n\n// Show Component\nexport const ApprovalShow = () => (\n  <Show>\n    <ApprovalShowContent />\n  </Show>\n);\n\n// Separate component to access record context\nconst ApprovalShowContent = () => {\n  const record = useRecordContext();\n  const notify = useNotify();\n  const [viewerOpen, setViewerOpen] = useState(false);\n  const [fileUrl, setFileUrl] = useState<string | null>(null);\n  const [fileType, setFileType] = useState<string | null>(null);\n\n  if (!record) return null;\n\n  const handleViewFile = async (id: string) => {\n    try {\n      const url = `${apibase}/view/${id}/`;\n      const response = await fetch(url, {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n          Accept: \"application/json\",\n        },\n      });\n\n      if (!response.ok) throw new Error(\"Failed to fetch document\");\n\n      const data = await response.json();\n      if (!data.file_url) throw new Error(\"Invalid response from server\");\n\n      setFileType(record.file_extension);\n      setFileUrl(data.file_url);\n      setViewerOpen(true);\n      notify(\"Document loaded successfully\", { type: \"success\" });\n    } catch (error) {\n      console.error(\"Error viewing file:\", error);\n      notify(\"Error loading document\", { type: \"error\" });\n    }\n  };\n\n  return (\n    <SimpleShowLayout>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n        <SectionTitle variant=\"h6\">\n          <FileText size={20} /> Basic Information\n        </SectionTitle>\n        <Box display=\"flex\" gap={2}>\n          <Button \n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<Eye size={20} />}\n            onClick={() => handleViewFile(record.id)}\n            disabled={!record?.id} \n          >\n            View File\n          </Button>\n          <ApprovalButton type=\"approved\" />\n          <ApprovalButton type=\"disapproved\" />\n        </Box>\n      </Box>\n      <InfoRow><Typography variant=\"subtitle1\">Title:</Typography><TextField source=\"title\" /></InfoRow>\n      <InfoRow><Typography variant=\"subtitle1\">Description:</Typography><TextField source=\"description\" /></InfoRow>\n      <Divider />\n\n      <SectionTitle variant=\"h6\"><User size={20} /> Author & Department</SectionTitle>\n      <InfoRow><Typography variant=\"subtitle1\">Author:</Typography><TextField source=\"author\" /></InfoRow>\n      <InfoRow><Typography variant=\"subtitle1\">Department:</Typography><TextField source=\"department\" /></InfoRow>\n      <Divider />\n\n      <SectionTitle variant=\"h6\"><Calendar size={20} /> Timestamps</SectionTitle>\n      <InfoRow><Typography variant=\"subtitle1\">Created:</Typography><DateField source=\"created_at\" showTime /></InfoRow>\n      <InfoRow><Typography variant=\"subtitle1\">Updated:</Typography><DateField source=\"updated_time\" showTime /></InfoRow>\n\n      <FileViewer\n        open={viewerOpen}\n        onClose={() => setViewerOpen(false)}\n        fileUrl={fileUrl}\n        fileName={record?.title || \"Document\"}\n        fileType={fileType}\n      />\n    </SimpleShowLayout>\n  );\n};\n\nexport default ApprovalShow;","import React, { useState } from 'react';\nimport {\n  SimpleForm,\n  TextInput,\n  required,\n  useNotify,\n  useRedirect,\n  SaveButton,\n  Toolbar,\n  useTranslate,\n} from \"react-admin\";\nimport { CardContent, Typography, Box, CircularProgress } from '@mui/material';\nimport customDataProvider from '../dataProvider';\n\n// Custom validation for matching passwords\nconst validatePasswordMatch = (value, allValues) => {\n  if (value !== allValues.newPassword) {\n    return 'Passwords do not match';\n  }\n  return undefined;\n};\n\n// Custom validation for password requirements\nconst validatePassword = (value) => {\n  if (!value) return 'Required';\n  if (value.length < 8) return 'Password must be at least 8 characters';\n  return undefined;\n};\n\n// Custom error message component with red text\nconst ErrorMessage = ({ message }) => (\n  message ? <Typography color=\"error\" variant=\"caption\" sx={{ mt: -1, mb: 1, display: 'block' }}>\n    {message}\n  </Typography> : null\n);\n\n// Custom toolbar with centered Save button\nconst CustomToolbar = ({ saving, ...props }) => (\n  <Toolbar {...props} sx={{ display: 'flex', justifyContent: 'center' }}>\n    <SaveButton label=\"Update Password\" disabled={saving} />\n    {saving && <CircularProgress size={24} sx={{ ml: 1 }} />}\n  </Toolbar>\n);\n\nexport const UpdateLibriancePassword = () => {\n  const notify = useNotify();\n  const redirect = useRedirect();\n  const translate = useTranslate();\n  const [saving, setSaving] = useState(false);\n  const [serverErrors, setServerErrors] = useState({});\n\n  // Manual submit handler calling the data provider\n  const handleSubmit = async (data) => {\n    setSaving(true);\n    setServerErrors({});\n    \n    try {\n      // Transform the data to match your backend expected fields\n      const transformedData = {\n        old_password: data.oldPassword,\n        new_password: data.newPassword,\n      };\n      \n      await customDataProvider.create(\"change-password\", { data: transformedData });\n      notify(\"Password updated successfully\", { type: \"success\" });\n      redirect(\"/\");\n    } catch (error) {\n      console.error(\"Password update error:\", error);\n      \n      // Handle different types of errors\n      if (error.body && typeof error.body === 'object') {\n        // Handle structured error responses from the API\n        const errorData = error.body;\n        \n        // Extract field-specific errors\n        const fieldErrors = {};\n        \n        if (errorData.old_password) {\n          fieldErrors.oldPassword = Array.isArray(errorData.old_password) \n            ? errorData.old_password[0] \n            : errorData.old_password;\n        }\n        \n        if (errorData.new_password) {\n          fieldErrors.newPassword = Array.isArray(errorData.new_password) \n            ? errorData.new_password[0] \n            : errorData.new_password;\n        }\n        \n        if (Object.keys(fieldErrors).length > 0) {\n          setServerErrors(fieldErrors);\n          notify(\"Please correct the errors below\", { type: \"warning\" });\n        } else if (errorData.detail || errorData.error) {\n          // General error message\n          notify(`Error: ${errorData.detail || errorData.error}`, { type: \"error\" });\n        } else {\n          // Fallback for other structured errors\n          notify(\"An error occurred while updating your password\", { type: \"error\" });\n        }\n      } else {\n        // Handle string error messages or unexpected errors\n        const errorMessage = error.message || \"An unexpected error occurred\";\n        notify(`Error: ${errorMessage}`, { type: \"error\" });\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <Box>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Update Password\n        </Typography>\n        <SimpleForm\n          onSubmit={handleSubmit}\n          toolbar={<CustomToolbar saving={saving} />}\n          sx={{\n            '& .RaSimpleForm-form': {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: 2,\n            },\n          }}\n        >\n          <TextInput\n            source=\"oldPassword\"\n            label=\"Current Password\"\n            type=\"password\"\n            fullWidth\n            validate={[required()]}\n            sx={{ mb: serverErrors.oldPassword ? 0 : 2 }}\n            error={!!serverErrors.oldPassword}\n          />\n          {/* Custom error message component for old password */}\n          <ErrorMessage message={serverErrors.oldPassword} />\n          \n          <TextInput\n            source=\"newPassword\"\n            label=\"New Password\"\n            type=\"password\"\n            fullWidth\n            validate={[required(), validatePassword]}\n            helperText=\"Password must be at least 8 characters\"\n            sx={{ mb: serverErrors.newPassword ? 0 : 2 }}\n            error={!!serverErrors.newPassword}\n          />\n          {/* Custom error message component for new password */}\n          <ErrorMessage message={serverErrors.newPassword} />\n          \n          <TextInput\n            source=\"confirmPassword\"\n            label=\"Confirm New Password\"\n            type=\"password\"\n            fullWidth\n            validate={[required(), validatePasswordMatch]}\n            sx={{ mb: 2 }}\n          />\n        </SimpleForm>\n      </CardContent>\n    </Box>\n  );\n};","import React, { useState } from 'react';\nimport {\n  SimpleForm,\n  TextInput,\n  required,\n  useNotify,\n  useRedirect,\n  SaveButton,\n  Toolbar,\n  useTranslate,\n} from \"react-admin\";\nimport { CardContent, Typography, Box, CircularProgress } from '@mui/material';\nimport customDataProvider from '../dataProvider';\n\n// Custom validation for matching passwords\nconst validatePasswordMatch = (value, allValues) => {\n  if (value !== allValues.newPassword) {\n    return 'Passwords do not match';\n  }\n  return undefined;\n};\n\n// Custom validation for password requirements\nconst validatePassword = (value) => {\n  if (!value) return 'Required';\n  if (value.length < 8) return 'Password must be at least 8 characters';\n  return undefined;\n};\n\n// Custom error message component with red text\nconst ErrorMessage = ({ message }) => (\n  message ? <Typography color=\"error\" variant=\"caption\" sx={{ mt: -1, mb: 1, display: 'block' }}>\n    {message}\n  </Typography> : null\n);\n\n// Custom toolbar with centered Save button\nconst CustomToolbar = ({ saving, ...props }) => (\n  <Toolbar {...props} sx={{ display: 'flex', justifyContent: 'center' }}>\n    <SaveButton label=\"Update Password\" disabled={saving} />\n    {saving && <CircularProgress size={24} sx={{ ml: 1 }} />}\n  </Toolbar>\n);\n\nexport const UpdateDepartemntPassword = () => {\n  const notify = useNotify();\n  const redirect = useRedirect();\n  const [saving, setSaving] = useState(false);\n  const [serverErrors, setServerErrors] = useState({});\n\n  // Manual submit handler calling the data provider\n  const handleSubmit = async (data) => {\n    setSaving(true);\n    setServerErrors({});\n    \n    try {\n      // Transform the data to match your backend expected fields\n      const transformedData = {\n        old_password: data.oldPassword,\n        new_password: data.newPassword,\n      };\n      \n      await customDataProvider.create(\"change-password\", { data: transformedData });\n      notify(\"Password updated successfully\", { type: \"success\" });\n      redirect(\"/\");\n    } catch (error) {\n      console.error(\"Password update error:\", error);\n      \n      // Handle different types of errors\n      if (error.body && typeof error.body === 'object') {\n        // Handle structured error responses from the API\n        const errorData = error.body;\n        \n        // Extract field-specific errors\n        const fieldErrors = {};\n        \n        if (errorData.old_password) {\n          fieldErrors.oldPassword = Array.isArray(errorData.old_password) \n            ? errorData.old_password[0] \n            : errorData.old_password;\n        }\n        \n        if (errorData.new_password) {\n          fieldErrors.newPassword = Array.isArray(errorData.new_password) \n            ? errorData.new_password[0] \n            : errorData.new_password;\n        }\n        \n        if (Object.keys(fieldErrors).length > 0) {\n          setServerErrors(fieldErrors);\n          notify(\"Please correct the errors below\", { type: \"warning\" });\n        } else if (errorData.detail || errorData.error) {\n          // General error message\n          notify(`Error: ${errorData.detail || errorData.error}`, { type: \"error\" });\n        } else {\n          // Fallback for other structured errors\n          notify(\"An error occurred while updating your password\", { type: \"error\" });\n        }\n      } else {\n        // Handle string error messages or unexpected errors\n        const errorMessage = error.message || \"An unexpected error occurred\";\n        notify(`Error: ${errorMessage}`, { type: \"error\" });\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <Box>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Update Password\n        </Typography>\n        <SimpleForm\n          onSubmit={handleSubmit}\n          toolbar={<CustomToolbar saving={saving} />}\n          sx={{\n            '& .RaSimpleForm-form': {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: 2,\n            },\n          }}\n        >\n          <TextInput\n            source=\"oldPassword\"\n            label=\"Current Password\"\n            type=\"password\"\n            fullWidth\n            validate={[required()]}\n            sx={{ mb: serverErrors.oldPassword ? 0 : 2 }}\n            error={!!serverErrors.oldPassword}\n          />\n          {/* Custom error message component for old password */}\n          <ErrorMessage message={serverErrors.oldPassword} />\n          \n          <TextInput\n            source=\"newPassword\"\n            label=\"New Password\"\n            type=\"password\"\n            fullWidth\n            validate={[required(), validatePassword]}\n            helperText=\"Password must be at least 8 characters\"\n            sx={{ mb: serverErrors.newPassword ? 0 : 2 }}\n            error={!!serverErrors.newPassword}\n          />\n          {/* Custom error message component for new password */}\n          <ErrorMessage message={serverErrors.newPassword} />\n          \n          <TextInput\n            source=\"confirmPassword\"\n            label=\"Confirm New Password\"\n            type=\"password\"\n            fullWidth\n            validate={[required(), validatePasswordMatch]}\n            sx={{ mb: 2 }}\n          />\n        </SimpleForm>\n      </CardContent>\n    </Box>\n  );\n};","import React, { useState } from \"react\";\nimport { Show, SimpleShowLayout, TextField, DateField, Button, TopToolbar, useRecordContext, useNotify } from \"react-admin\";\nimport { Eye, FileText, User, Calendar } from \"lucide-react\";\nimport { Typography, Grid, Box, Divider, styled } from \"@mui/material\";\nimport FileViewer from \"./FileViewer\";\nimport { apibase } from \"../../dataProvider\";\nimport { tokenManager } from \"../../utils/tokenManager\";\n\n// Styled Components\nconst SectionTitle = styled(Typography)({\n  display: \"flex\",\n  alignItems: \"center\",\n  gap: \"8px\",\n  fontWeight: \"bold\",\n  marginBottom: \"16px\",\n  marginTop: \"16px\",\n});\n\nconst InfoRow = styled(Box)({\n  display: \"flex\",\n  gap: \"32px\",\n  marginBottom: \"16px\",\n  alignItems: \"center\",\n});\n\n// Toolbar for Viewing Documents\nconst DepartmentFileShowActions = () => {\n  const record = useRecordContext();\n  const notify = useNotify();\n  const [viewerOpen, setViewerOpen] = useState(false);\n  const [fileUrl, setFileUrl] = useState<string | null>(null);\n  const [fileType, setFileType] = useState<string | null>(null);\n\n  const handleViewFile = async (id: string) => {\n    try {\n      const url = `${apibase}/view/${id}/`;\n      const response = await fetch(url, {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${await tokenManager.getAuthHeaders()}`,\n          Accept: \"application/json\",\n        },\n      });\n\n      if (!response.ok) throw new Error(\"Failed to fetch document\");\n\n      const data = await response.json();\n      if (!data.file_url) throw new Error(\"Invalid response from server\");\n\n      setFileType(record?.file_extension);\n      setFileUrl(data.file_url);\n      setViewerOpen(true);\n      notify(\"Document loaded successfully\", { type: \"success\" });\n    } catch (error) {\n      console.error(\"Error viewing file:\", error);\n      notify(\"Error loading document\", { type: \"error\" });\n    }\n  };\n\n  return (\n    <>\n      <TopToolbar>\n        <Button \n          label=\"View File\" \n          onClick={() => handleViewFile(record?.id)} \n          icon={<Eye size={20} />} \n          disabled={!record?.id} \n        />\n      </TopToolbar>\n\n      <FileViewer \n        open={viewerOpen} \n        onClose={() => setViewerOpen(false)} \n        fileUrl={fileUrl} \n        fileName={record?.title || \"Document\"} \n        fileType={fileType} \n      />\n    </>\n  );\n};\n\n// Main Component\nconst DepartmentFileShow = () => (\n  <Show actions={<DepartmentFileShowActions />}>\n    <SimpleShowLayout>\n      <SectionTitle variant=\"h6\"><FileText size={20} /> Basic Information</SectionTitle>\n      <InfoRow><Typography variant=\"subtitle1\">Title:</Typography><TextField source=\"title\" /></InfoRow>\n      <InfoRow><Typography variant=\"subtitle1\">Description:</Typography><TextField source=\"description\" /></InfoRow>\n      <Divider />\n      <SectionTitle variant=\"h6\"><User size={20} /> Author & Department</SectionTitle>\n      <InfoRow><Typography variant=\"subtitle1\">Author:</Typography><TextField source=\"author\" /></InfoRow>\n      <InfoRow><Typography variant=\"subtitle1\">Department:</Typography><TextField source=\"department\" /></InfoRow>\n      <Divider />\n      <SectionTitle variant=\"h6\"><Calendar size={20} /> Timestamps</SectionTitle>\n      <InfoRow><Typography variant=\"subtitle1\">Created:</Typography><DateField source=\"created_at\" showTime /></InfoRow>\n      <InfoRow><Typography variant=\"subtitle1\">Updated:</Typography><DateField source=\"updated_time\" showTime /></InfoRow>\n    </SimpleShowLayout>\n  </Show>\n);\n\nexport default DepartmentFileShow;\n","// src/hooks/useDepartments.ts\nimport { useState, useEffect } from \"react\";\nimport { tokenManager } from \"../../utils/tokenManager\";\nimport { apibase } from \"../../dataProvider\";\n\nexport const useDepartments = () => {\n  const [departments, setDepartments] = useState([]);\n\n  useEffect(() => {\n    const fetchDepartments = async () => {\n      try {\n        const token = await tokenManager.getAuthHeaders();\n        if (!token) throw new Error('No token found');\n\n        const response = await fetch(`${apibase}/departments/?all=true`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Accept': '*/*',\n          }\n        });\n        \n        if (!response.ok) throw new Error('Failed to fetch departments');\n        \n        const result = await response.json();\n        \n        if (result.status === 'success') {\n          const departmentChoices = result.data.departments.map(dept => ({\n            id: dept.id,\n            name: dept.name\n          }));\n          setDepartments(departmentChoices);\n        }\n      } catch (error) {\n        console.error('Error fetching departments:', error);\n        setDepartments([]);\n      }\n    };\n\n    fetchDepartments();\n  }, []);\n\n  return departments;\n};","// src/components/librarians/LibrarianFilter.tsx\nimport React from \"react\";\nimport { Filter, TextInput, SelectInput } from \"react-admin\";\nimport { useDepartments } from \"./useDepartments\";\n\nexport const LibrarianFilter = (props) => {\n  const departments = useDepartments();\n  const approved= ['approved' ,'unapproved']\n  \n  return (\n    <Filter {...props}>\n      <TextInput label=\"Search\" source=\"title\" alwaysOn />\n      <TextInput label=\"Author\" source=\"author\" />\n      {/* <TextInput label=\"File Name\" source=\"filename\" /> */}\n      {/* <SelectInput \n        label=\"Department\" \n        source=\"department_id\" \n        choices={departments}\n        optionText=\"name\"\n        optionValue=\"id\"\n      /> */}\n      <SelectInput label=\"approved\" choices={approved} source=\"approved\" />\n    </Filter>\n  );\n};","import React from \"react\";\nimport { \n  List, \n  Datagrid, \n  TextField, \n  EditButton, \n  DeleteButton,\n  useRecordContext\n} from \"react-admin\";\nimport { LibrarianFilter } from \"./LibrarianFilter\";\nimport { \n  Tooltip, \n  Typography,\n  styled,\n  Box\n} from \"@mui/material\";\nimport { AlertCircle, CheckCircle, Clock } from \"lucide-react\";\n\n// Types\nexport interface Librarian {\n  id: string;\n  title: string;\n  author: string;\n  approved: string;\n  description: string;\n  disapproval_reason?: string;\n  created_at: string;\n  updated_time: string;\n}\n\n// Styled Components\nconst StatusCell = styled(Typography, {\n  shouldForwardProp: (prop) => prop !== \"status\"\n})<{ status: 'approved' | 'rejected' | 'pending' }>(({ theme, status }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  gap: '8px',\n  color: status === 'approved' \n    ? theme.palette.success.main \n    : status === 'rejected'\n    ? theme.palette.error.main\n    : theme.palette.warning.main,\n  fontWeight: 500,\n}));\n\n// Custom Description Field Component\nconst TruncatedDescriptionField = () => {\n  const record = useRecordContext();\n  if (!record) return null;\n\n  const description = record.description || '';\n  const truncatedText = description.length > 10 \n    ? `${description.substring(0, 10)}...` \n    : description;\n  \n  return (\n    <Tooltip \n      title={description} \n      placement=\"top\"\n      arrow\n      enterDelay={500}\n    >\n      <Typography \n        sx={{ \n          cursor: 'help',\n          '&:hover': { textDecoration: 'underline' }\n        }}\n      >\n        {truncatedText}\n      </Typography>\n    </Tooltip>\n  );\n};\n\n// Custom Status Field Component\nconst ApprovalStatusField = () => {\n  const record = useRecordContext<Librarian>();\n  if (!record) return null;\n\n  const getStatusConfig = () => {\n    if (record.approved === 'unapproved') {\n      if (record.disapproval_reason) {\n        return {\n          text: 'Rejected',\n          status: 'rejected' as const,\n          icon: <AlertCircle size={16} />,\n          tooltipText: `Rejection Reason: ${record.disapproval_reason}`\n        };\n      }\n      return {\n        text: 'Pending',\n        status: 'pending' as const,\n        icon: <Clock size={16} />,\n        tooltipText: 'Awaiting approval'\n      };\n    }\n    return {\n      text: 'Approved',\n      status: 'approved' as const,\n      icon: <CheckCircle size={16} />,\n      tooltipText: 'Approved'\n    };\n  };\n\n  const statusConfig = getStatusConfig();\n  \n  return (\n    <StatusCell status={statusConfig.status}>\n      {statusConfig.text}\n      <Tooltip \n        title={\n          <Box>\n            <Typography variant=\"body2\">{statusConfig.tooltipText}</Typography>\n            {record.updated_time && (\n              <Typography variant=\"caption\" display=\"block\">\n                Last updated: {new Date(record.updated_time).toLocaleString()}\n              </Typography>\n            )}\n          </Box>\n        }\n        arrow\n      >\n        {statusConfig.icon}\n      </Tooltip>\n    </StatusCell>\n  );\n};\n\n// Custom Row Component\nconst CustomRow = ({ record, ...props }) => {\n  if (!record) return null;\n\n  const getRowColor = () => {\n    if (record.approved === 'unapproved') {\n      return record.disapproval_reason \n        ? 'rgba(211, 47, 47, 0.1)' // Red for rejected\n        : 'rgba(255, 193, 7, 0.1)'; // Yellow for pending\n    }\n    return 'rgba(76, 175, 80, 0.1)'; // Green for approved\n  };\n\n  return (\n    <tr \n      {...props} \n      style={{\n        backgroundColor: getRowColor(),\n        transition: 'background-color 0.2s ease',\n      }}\n    >\n      {props.children}\n    </tr>\n  );\n};\n\n// Main List Component\nexport const LibrarianList = () => (\n  <List \n    filters={<LibrarianFilter />}\n    sort={{ field: 'created_at', order: 'DESC' }}\n    perPage={25}\n  >\n    <Datagrid >\n      <TextField source=\"title\" label=\"Title\" />\n      <TextField source=\"author\" label=\"Author\" />\n      <ApprovalStatusField source=\"approved\" label=\"Status\" />\n      <TruncatedDescriptionField source=\"description\" label=\"Description\" />\n      <EditButton />\n      <DeleteButton />\n    </Datagrid>\n  </List>\n);\n\nexport default LibrarianList;","// src/components/librarians/LibrarianToolbar.tsx\nimport React from \"react\";\nimport { Toolbar, SaveButton } from \"react-admin\";\n\nexport const LibrarianToolbar = (props) => (\n  <Toolbar {...props}>\n    <SaveButton label=\"Upload\" />\n  </Toolbar>\n);","// src/components/librarians/LibrarianForm.tsx\nimport React from \"react\";\nimport { SimpleForm, TextInput, SelectInput, FileInput, FileField, required } from \"react-admin\";\nimport { useDepartments } from \"./useDepartments\";\nimport { LibrarianToolbar } from \"./LibrarianToolbar\";\n\ninterface LibrarianFormProps {\n  isEdit?: boolean;\n  onSubmit?: (data: any) => Promise<void>;\n}\n\nexport const LibrarianForm: React.FC<LibrarianFormProps> = ({ \n  isEdit = false, \n  onSubmit \n}) => {\n  const departments = useDepartments();\n\n  return (\n    <SimpleForm \n      toolbar={<LibrarianToolbar />}\n      onSubmit={onSubmit}\n    >\n      <TextInput\n        source=\"title\"\n        label=\"Title\"\n        fullWidth\n        validate={[required()]}\n      />\n      <TextInput\n        source=\"author\"\n        label=\"Author Name\"\n        fullWidth\n        validate={[required()]}\n      />\n      <SelectInput\n        source=\"departemnt_id\"\n        label=\"Department\"\n        choices={departments}\n        optionText=\"name\"\n        optionValue=\"id\"\n        fullWidth\n        validate={[required()]}\n      />\n      <TextInput\n        source=\"description\"\n        label=\"Project/Research Description\"\n        multiline\n        fullWidth\n        validate={[required()]}\n      />\n\n        <FileInput\n          source=\"file\"\n          label=\"Upload File\"\n          accept={{\n            \"application/pdf\": [\".pdf\"],\n          }}\n          validate={!isEdit ? [required()] : undefined}\n        >\n          <FileField source=\"src\" title=\"title\" />\n        </FileInput>\n    </SimpleForm>\n  );\n};","// src/components/librarians/LibrarianCreate.tsx\nimport React from \"react\";\nimport { Create, useNotify, useRedirect } from \"react-admin\";\nimport { LibrarianForm } from \"./LibrarianForm\";\nimport customDataProvider  from \"../../dataProvider\";\n\nexport const LibrarianCreate = () => {\n  const notify = useNotify();\n  const redirect = useRedirect();\n\n  const handleSubmit = async (data) => {\n    try {\n      await customDataProvider.createfile(\"/create/\", { data });\n      notify(\"Librarian file created successfully\", { type: \"success\" });\n      redirect(\"/libapprovals\");\n    } catch (error) {\n      notify(`Error: ${error.message}`, { type: \"error\" });\n    }\n  };\n\n  return (\n    <Create>\n      <LibrarianForm onSubmit={handleSubmit} />\n    </Create>\n  );\n};","// src/components/librarians/LibrarianEdit.tsx\nimport React from \"react\";\nimport { Edit } from \"react-admin\";\nimport { LibrarianForm } from \"./LibrarianForm\";\n\nexport const LibrarianEdit = () => (\n  <Edit>\n    <LibrarianForm isEdit={true} />\n  </Edit>\n);","// src/components/librarians/LibrarianFileShow.tsx\nimport React from \"react\";\nimport { \n  Show, \n  SimpleShowLayout, \n  TextField, \n  DateField, \n  useRecordContext \n} from \"react-admin\";\nimport { \n  FileText, \n  User, \n  Calendar, \n  AlertCircle,\n  CheckCircle \n} from \"lucide-react\";\nimport { \n  Typography, \n  Box, \n  Divider, \n  styled,\n  Alert,\n  Chip,\n  Paper\n} from \"@mui/material\";\n\n// Types\nexport interface LibrarianFile {\n  id: string;\n  title: string;\n  description: string;\n  author: string;\n  department: string;\n  approved: 'pending' | 'approved' | 'disapproved';\n  disapproval_reason?: string;\n  created_at: string;\n  updated_time: string;\n}\n\n// Styled Components\nconst StyledPaper = styled(Paper)(({ theme }) => ({\n  padding: theme.spacing(3),\n  marginBottom: theme.spacing(3),\n  borderRadius: theme.shape.borderRadius,\n}));\n\nconst SectionTitle = styled(Typography)({\n  display: \"flex\",\n  alignItems: \"center\",\n  gap: \"8px\",\n  fontWeight: \"bold\",\n  marginBottom: \"16px\",\n  marginTop: \"16px\",\n});\n\nconst InfoRow = styled(Box)({\n  display: \"flex\",\n  gap: \"32px\",\n  marginBottom: \"16px\",\n  alignItems: \"center\",\n});\n\nconst StatusBanner = styled(Box)(({ theme }) => ({\n  marginBottom: theme.spacing(3),\n  '& .MuiAlert-root': {\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nconst StatusChip = styled(Chip)(({ theme, status }: { theme: any, status: string }) => ({\n  marginBottom: theme.spacing(2),\n  padding: theme.spacing(1),\n  backgroundColor: status === 'approved' \n    ? theme.palette.success.light \n    : status === 'disapproved' \n      ? theme.palette.error.light \n      : theme.palette.warning.light,\n  color: status === 'approved' \n    ? theme.palette.success.dark \n    : status === 'disapproved' \n      ? theme.palette.error.dark \n      : theme.palette.warning.dark,\n  '& .MuiChip-icon': {\n    color: 'inherit'\n  }\n}));\n\n// Status Component\nconst ApprovalStatus = () => {\n  const record = useRecordContext<LibrarianFile>();\n  if (!record) return null;\n\n  const getStatusDetails = () => {\n    if (record.approved === 'approved') {\n      return {\n        icon: <CheckCircle size={20} />,\n        label: 'Approved',\n        color: 'success'\n      };\n    } else if (record.approved === 'unapproved' && record.disapproval_reason ) {\n      return {\n        icon: <AlertCircle size={20} />,\n        label: 'Disapproved',\n        color: 'error'\n      };\n    }\n    return {\n      icon: <AlertCircle size={20} />,\n      label: 'Pending',\n      color: 'warning'\n    };\n  };\n\n  const statusDetails = getStatusDetails();\n\n  return (\n    <StatusBanner>\n      <Box display=\"flex\" flexDirection=\"column\" gap={2}>\n        <StatusChip\n          icon={statusDetails.icon}\n          label={statusDetails.label}\n          status={record.approved}\n        />\n        {record.approved === 'unapproved' && record.disapproval_reason && (\n          <Alert \n            severity=\"error\" \n            icon={<AlertCircle size={20} />}\n            sx={{\n              '& .MuiAlert-message': {\n                width: '100%'\n              }\n            }}\n          >\n            <Box>\n              <Typography variant=\"subtitle2\" fontWeight=\"bold\" gutterBottom>\n                Disapproval Reason:\n              </Typography>\n              <Typography variant=\"body2\" paragraph>\n                {record.disapproval_reason}\n              </Typography>\n              <Divider sx={{ my: 1 }} />\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Disapproved on: {new Date(record.updated_time).toLocaleString()}\n              </Typography>\n            </Box>\n          </Alert>\n        )}\n      </Box>\n    </StatusBanner>\n  );\n};\n\n// Main Component\nconst LibrarianFileShow = () => {\n  const record = useRecordContext<LibrarianFile>();\n\n  return (\n    <Show>\n      <SimpleShowLayout>\n        <StyledPaper elevation={1}>\n          <ApprovalStatus />\n          \n          <SectionTitle variant=\"h6\">\n            <FileText size={20} /> Basic Information\n          </SectionTitle>\n          <InfoRow>\n            <Typography variant=\"subtitle1\">Title:</Typography>\n            <TextField source=\"title\" />\n          </InfoRow>\n          <InfoRow>\n            <Typography variant=\"subtitle1\">Description:</Typography>\n            <TextField source=\"description\" />\n          </InfoRow>\n        </StyledPaper>\n\n        <StyledPaper elevation={1}>\n          <SectionTitle variant=\"h6\">\n            <User size={20} /> Author\n          </SectionTitle>\n          <InfoRow>\n            <Typography variant=\"subtitle1\">Author:</Typography>\n            <TextField source=\"author\" />\n          </InfoRow>\n          {/* <InfoRow>\n            <Typography variant=\"subtitle1\">Department:</Typography>\n            <TextField source=\"department\" />\n          </InfoRow> */}\n        </StyledPaper>\n\n        <StyledPaper elevation={1}>\n          <SectionTitle variant=\"h6\">\n            <Calendar size={20} /> Timestamps\n          </SectionTitle>\n          <InfoRow>\n            <Typography variant=\"subtitle1\">Created:</Typography>\n            <DateField source=\"created_at\" showTime />\n          </InfoRow>\n          <InfoRow>\n            <Typography variant=\"subtitle1\">Updated:</Typography>\n            <DateField source=\"updated_time\" showTime />\n          </InfoRow>\n        </StyledPaper>\n\n        {record?.approved === 'disapproved' && (\n          <StyledPaper elevation={1}>\n            <SectionTitle variant=\"h6\">\n              <AlertCircle size={20} /> Disapproval Information\n            </SectionTitle>\n            <InfoRow>\n              <Typography variant=\"subtitle1\">Reason:</Typography>\n              <TextField source=\"disapproval_reason\" />\n            </InfoRow>\n          </StyledPaper>\n        )}\n      </SimpleShowLayout>\n    </Show>\n  );\n};\n\nexport default LibrarianFileShow;","// src/layout/CustomLayout.js\nimport { Resource } from \"react-admin\";\nimport { Box } from \"@mui/material\";\nimport { \n  FileText, \n  ClipboardCheck, \n  BarChart2, \n  FolderPlus,\n  Lock\n} from \"lucide-react\";\nimport { CustomTopBar } from '../components/CustomTopBar';\nimport  DepartmentFileCreate  from \"../departemnt_head/components/DepartmentFileCreate\";\nimport DepartmentFileEdit from \"../departemnt_head/components/DepartmentFileEdit\";\nimport DepartmentFileList from \"../departemnt_head/components/DepartmentFileList\";\nimport { \n  ApprovalList, \n  ApprovalShow \n} from \"../departemnt_head/Approvals\";\n// import { \n//   StatisticsList \n// } from \"../components/Statistics\";\n\nimport { ThemeProvider,createTheme } from '@mui/material/styles';\nimport { Layout, LayoutProps  } from 'react-admin';\nimport {UpdateLibriancePassword} from '../libriance/Updatepassword'\nimport {UpdateDepartemntPassword} from '../departemnt_head/Updatepassword'\nimport DepartmentFileShow from \"../departemnt_head/components/DepartmentFileShow\";\nimport { LibrarianList } from \"../libriance/components/LibrarianList\";\nimport { LibrarianCreate } from \"../libriance/components/LibrarianCreate\";\nimport { LibrarianEdit } from \"../libriance/components/LibrarianEdit\";\nimport librarianFileShow from \"../libriance/components/Librarianshow\";\nimport { Home } from \"lucide-react\";\n\nconst RedirectResource = () => {\n  window.location = \"/\"\n};\n\nconst roleResources = {\n  librarian: [\n    <Resource\n      key=\"home\"\n      name=\"home\"\n      list={RedirectResource} \n      icon={Home} \n      options={{ label: \"Home\" }} \n    />,\n    <Resource\n      key=\"files\"\n      name=\"libapprovals\"\n      list={LibrarianList}\n      create={LibrarianCreate}\n      edit={LibrarianEdit}\n      show={librarianFileShow}\n      icon={FileText}\n      options={{ \n        label: 'Library Files',\n      }}\n    />,\n    <Resource\n      key=\"updatePassword\"\n      name=\"updatePassword\"\n      list={UpdateLibriancePassword}\n      icon={Lock}\n      options={{ \n        label: 'Update Password',\n      }}\n    />,\n  ],\n  department_head: [\n    <Resource\n      key=\"home\"\n      name=\"home\"\n      list={RedirectResource} \n      icon={Home} \n      options={{ label: \"Home\" }} \n    />,\n    <Resource\n      key=\"approvals\"\n      name=\"approvals\"\n      list={ApprovalList}\n      show={ApprovalShow}\n      icon={ClipboardCheck}\n      options={{ \n        label: 'Department Approvals',\n      }}\n    />,\n    // <Resource\n    //   key=\"statistics\"\n    //   name=\"statistics\"\n    //   list={StatisticsList}\n    //   icon={BarChart2}\n    //   options={{ \n    //     label: 'Department Statistics',\n    //   }}\n    // />,\n    <Resource\n      key=\"deptfiles\"\n      name=\"department_files\"\n      list={DepartmentFileList}\n      edit={DepartmentFileEdit}\n      create={DepartmentFileCreate}\n      show={DepartmentFileShow}\n      icon={FolderPlus}\n      options={{ \n        label: 'Department Files',\n      }}\n    />,\n    <Resource\n      key=\"updatePassword\"\n      name=\"updatePassword\"\n      list={UpdateDepartemntPassword}\n      icon={Lock}\n      options={{ \n        label: 'Update Password',\n      }}\n    />,\n  ],\n};\n\n// Custom theme\nconst customTheme = createTheme({\n  palette: {\n    primary: {\n      main: '#1976d2',\n      light: '#42a5f5',\n      dark: '#1565c0',\n      contrastText: '#ffffff',\n    },\n    secondary: {\n      main: '#000000',\n    },\n    background: {\n      default: '#ffffff',\n      paper: '#ffffff',\n    },\n  },\n  typography: {\n    fontFamily: \"Arial, sans-serif\",\n  },\n  components: {\n    MuiAppBar: {\n      styleOverrides: {\n        root: {\n          backgroundColor: '#1976d2',\n        },\n      },\n    },\n  },\n});\n\n// Custom Layout component\nconst CustomLayout = (props: LayoutProps) => {\n  const role = localStorage.getItem('role') || 'librarian';\n\n  return (\n    <ThemeProvider theme={customTheme}>\n      <Box sx={{ display: 'flex', flexDirection: 'column', minHeight: '100vh' }}>\n        <CustomTopBar role={role} />\n        <Box\n          component=\"main\"\n          sx={{\n            flexGrow: 1,\n            pt: 3, // Add padding top to account for AppBar height\n          }}\n        >\n          <Layout \n            {...props} \n            sx={{\n              '& .RaLayout-content': {\n               pl:5\n              },\n            }}\n          />\n        </Box>\n      </Box>\n    </ThemeProvider>\n  );\n};\n\nexport { roleResources, CustomLayout };","// src/components/StatCard.js\nimport React from \"react\";\nimport { Card, CardContent, CardHeader, Typography, Box, useTheme } from \"@mui/material\";\nimport { styled } from \"@mui/material/styles\";\n\nconst StyledCard = styled(Card)(({ theme }) => ({\n  height: \"100%\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  transition: \"transform 0.2s\",\n  \"&:hover\": {\n    transform: \"translateY(-4px)\",\n  },\n}));\n\nconst StyledCardHeader = styled(CardHeader)(({ theme }) => ({\n  background: theme.palette.grey[50],\n}));\n\nconst StatCard = ({ title, value, icon: Icon, trend }) => {\n  const muiTheme = useTheme();\n  const trendColor = trend > 0 ? muiTheme.palette.success.main : muiTheme.palette.error.main;\n\n  return (\n    <StyledCard>\n      <StyledCardHeader\n        title={\n          <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\n            <Typography variant=\"h6\">{title}</Typography>\n            {Icon && <Icon size={24} />}\n          </Box>\n        }\n      />\n      <CardContent>\n        <Typography variant=\"h4\" gutterBottom>\n          {value}\n        </Typography>\n        {trend !== undefined && (\n          <Typography style={{ color: trendColor }}>\n            {trend > 0 ? \"+\" : \"\"}\n            {trend}% from last month\n          </Typography>\n        )}\n      </CardContent>\n    </StyledCard>\n  );\n};\n\nexport default StatCard;\n","import React from \"react\";\nimport { Box, Card, CardContent, Avatar, Typography } from \"@mui/material\";\nimport { styled } from \"@mui/material/styles\";\nimport { BookOpen, GraduationCap } from \"lucide-react\";\nimport { api } from \"../dataProvider\";\n\n// Reusable styled card for the welcome message\nconst StyledCard = styled(Card)(({ theme }) => ({\n  height: \"100%\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  transition: \"transform 0.2s\",\n  \"&:hover\": {\n    transform: \"translateY(-4px)\",\n  },\n}));\n\nconst WelcomeCard = ({ role, name ,image_path }) => (\n  <StyledCard sx={{ mb: 3, minHeight: 110, maxHeight: 110 }}>\n    <CardContent sx={{ py: 2 }}>\n      <Box display=\"flex\" alignItems=\"center\" gap={2}>\n        <Avatar sx={{ bgcolor: \"primary.main\", width: 48, height: 48 }}>\n          {/* {role === \"librarian\" ? <BookOpen size={24} /> : <GraduationCap size={24} />} */}\n          <img\n          src={api + image_path}  \n          alt=\"Profile\"\n          className=\"w-12 h-12 rounded-full object-cover shadow-lg border-2 border-b-amber-300\"\n          />\n        </Avatar>\n        <Box>\n          <Typography variant=\"h5\" component=\"div\">\n            Welcome, {name}\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\">\n            {role === \"librarian\"\n              ? \"Manage and track library resources efficiently\"\n              : \"Monitor your department's research activities\"}\n          </Typography>\n        </Box>\n      </Box>\n    </CardContent>\n  </StyledCard>\n);\n\nexport default WelcomeCard;\n","\nexport const getTokenData = () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) return null;\n\n      const payload = token.split('.')[1];\n      const decodedPayload = JSON.parse(atob(payload));\n  \n      return {\n        user_id: decodedPayload.user_id,\n        user_name : decodedPayload.user_name,\n        department : decodedPayload.department,\n        department_id : decodedPayload.department_id,\n        email : decodedPayload.email,\n        image_path : decodedPayload.image_path,\n        user_type: decodedPayload.user_type,\n      };\n    } catch (error) {\n      console.error('Error decoding token:', error);\n      return null;\n    }\n  };\n  \n  export const removeToken = () => {\n    localStorage.clear();\n    window.location.href = '/login';\n  };","import React, { useState, useEffect } from \"react\";\nimport { Box, Typography, Grid, Card, CardContent, CardHeader, styled } from \"@mui/material\";\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, \n  Tooltip, ResponsiveContainer, PieChart, Pie, Cell\n} from \"recharts\";\nimport { FileText, Download, Upload, Building } from \"lucide-react\";\nimport { apibase } from \"../dataProvider\";\nimport StatCard from \"../components/StatCard\";\nimport WelcomeCard from \"../components/WelcomeCard\";\nimport { tokenManager } from \"../utils/tokenManager\";\nimport {getTokenData} from  \"../utils/token\"\n\n// Types\ninterface Department {\n  id: string;\n  name: string;\n  file_count: number;\n  download_total: number;\n  history_total: number;\n  unapproved_files: number;\n  created_at: string;\n  updated_time: string;\n}\n\n\ninterface tokenData {\n  user_id: string,\n  user_name : string,\n  department : string,\n  department_id : string,\n  email : string,\n  image_path : string,\n  user_type: string,\n}\n\ninterface DepartmentStats {\n  total_departments: number;\n  total_files: number;\n  total_downloads: number;\n  total_history: number;\n  total_unapproved: number;\n}\n\ninterface ApiResponse {\n  status: string;\n  message: string;\n  data: {\n    departments: Department[];\n    statistics: DepartmentStats;\n  };\n}\n\n// Styled Components\nexport const StyledCard = styled(Card)(({ theme }) => ({\n  height: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n  transition: 'transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out',\n  '&:hover': {\n    transform: 'translateY(-4px)',\n    boxShadow: theme.shadows[4],\n  },\n  borderRadius: theme.shape.borderRadius,\n  overflow: 'hidden',\n}));\n\nexport const StyledCardHeader = styled(CardHeader)(({ theme }) => ({\n  background: theme.palette.mode === 'light' \n    ? theme.palette.grey[50] \n    : theme.palette.grey[900],\n  borderBottom: `1px solid ${theme.palette.divider}`,\n  '& .MuiCardHeader-title': {\n    fontSize: '1.125rem',\n    fontWeight: 600,\n    color: theme.palette.text.primary,\n  },\n  '& .MuiCardHeader-subheader': {\n    fontSize: '0.875rem',\n    color: theme.palette.text.secondary,\n  },\n  padding: theme.spacing(2),\n}));\n\n// Constants\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8', '#82ca9d'];\n\nconst LibrarianDashboard = () => {\n\n  const [departments, setDepartments] = useState<Department[]>([]);\n  const [stats, setStats] = useState<DepartmentStats>({\n    total_departments: 0,\n    total_files: 0,\n    total_downloads: 0,\n    total_history: 0,\n    total_unapproved: 0,\n  });\n  const [tokenData , settokenData] = useState<tokenData[]>([])\n\n  useEffect(() => {\n    const fetchDepartments = async () => {\n      try {\n        const token = await tokenManager.getAuthHeaders();\n        if (!token) throw new Error('No token found');\n\n\n        const response = await fetch(`${apibase}/departments/?all=true`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Accept': '*/*',\n          }\n        });\n        \n        if (!response.ok) throw new Error('Failed to fetch departments');\n        \n        const result: ApiResponse = await response.json();\n        \n        if (result.status === 'success') {\n          setDepartments(result.data.departments);\n          setStats(result.data.statistics);\n        }\n      } catch (error) {\n        console.error('Error fetching departments:', error);\n      }\n    };\n\n    const gettoken = async () => {\n      const value   = await getTokenData();\n      settokenData(value)\n    };\n\n    fetchDepartments();\n    gettoken();\n  }, []);\n\n  const chartData = departments.map(dept => ({\n    name: dept.name,\n    uploads: dept.file_count,\n    downloads: dept.download_total,\n    value: dept.history_total,\n  }));\n\n  return (\n    <Box p={3}>\n      <WelcomeCard role={tokenData.user_type} name={tokenData.user_name} image_path={tokenData.image_path}/>\n\n      <Grid container spacing={4}>\n        {/* Statistics Cards */}\n        <Grid item xs={12} md={4}>\n          <StatCard \n            title=\"Total Departments\" \n            value={stats.total_departments} \n            icon={Building} \n            trend={0} \n          />\n        </Grid>\n        <Grid item xs={12} md={4}>\n          <StatCard \n            title=\"Total Files\" \n            value={stats.total_files} \n            icon={Upload} \n            trend={12} \n          />\n        </Grid>\n        <Grid item xs={12} md={4}>\n          <StatCard \n            title=\"Total Downloads\" \n            value={stats.total_downloads} \n            icon={Download} \n            trend={8} \n          />\n        </Grid>\n        {/* <Grid item xs={12} md={3}>\n          <StatCard\n            title=\"Pending Approvals\"\n            value={stats.total_unapproved}\n            icon={FileText}\n            trend={-2}\n          />\n        </Grid> */}\n\n        {/* Charts */}\n        <Grid item xs={12}>\n          <StyledCard>\n            <StyledCardHeader title=\"Department Statistics\" />\n            <CardContent>\n              <Box display=\"flex\" gap={2}>\n                <Box flex={2} height={400}>\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <BarChart data={chartData}>\n                      <CartesianGrid strokeDasharray=\"3 3\" />\n                      <XAxis dataKey=\"name\" />\n                      <YAxis />\n                      <Tooltip />\n                      <Bar dataKey=\"uploads\" fill=\"#1976d2\" name=\"Files\" />\n                      <Bar dataKey=\"downloads\" fill=\"#dc004e\" name=\"Downloads\" />\n                    </BarChart>\n                  </ResponsiveContainer>\n                </Box>\n                \n                <Box flex={1} height={400}>\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <PieChart>\n                      <Pie\n                        data={chartData}\n                        dataKey=\"value\"\n                        nameKey=\"name\"\n                        cx=\"50%\"\n                        cy=\"50%\"\n                        outerRadius={100}\n                        label\n                      >\n                        {chartData.map((entry, index) => (\n                          <Cell \n                            key={`cell-${index}`} \n                            fill={COLORS[index % COLORS.length]} \n                          />\n                        ))}\n                      </Pie>\n                      <Tooltip />\n                    </PieChart>\n                  </ResponsiveContainer>\n                </Box>\n              </Box>\n            </CardContent>\n          </StyledCard>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default LibrarianDashboard;","import React, { useState, useEffect } from \"react\";\nimport { Box, Typography, Grid, CircularProgress } from \"@mui/material\";\nimport customDataProvider from \"../dataProvider\";\nimport StatCard from \"../components/StatCard\";\nimport WelcomeCard from \"../components/WelcomeCard\";\nimport { Users, Download, Upload, AlertCircle } from \"lucide-react\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n} from \"recharts\";\n\ninterface ChartDataItem {\n  name: string;\n  value: number;\n}\n\ninterface tokenData {\n  user_id: string,\n  user_name : string,\n  department : string,\n  department_id : string,\n  email : string,\n  image_path : string,\n  user_type: string,\n}\n\nconst DepartmentDashboard = () => {\n\n  // State for department data\n  const [department, setDepartment] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [chartData, setChartData] = useState<ChartDataItem[]>([\n    { name: \"Total Files\", value: 0 },\n    { name: \"Total Downloads\", value: 0 },\n  ]);\n  const [statistics, setstatistics] = useState(0)\n    const [tokenData , settokenData] = useState<tokenData[]>([])\n\n  useEffect(() => {\n    const fetchDepartmentData = async () => {\n      try {\n        const departmentData = await customDataProvider.getdepartemnt(\"departments\", {});\n          setDepartment(departmentData.data.departments[0]);\n          \n          // Update chart data when department data is available\n          setChartData([\n            { name: \"Total Files\", value: departmentData.data.departments[0].file_count },\n            { name: \"Total Downloads\", value: departmentData.data.departments[0].download_total },\n          ]);\n          setstatistics(departmentData.data.statistics.total_departments)\n        \n      } catch (err) {\n        setError(\"Error loading department data\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    const gettoken = async () => {\n      const value   = await getTokenData();\n      settokenData(value)\n    };\n\n    fetchDepartmentData();\n    gettoken();\n  }, []);\n\n  // Calculate the trend based on the time since creation\n  const calculateTrend = (value) => {\n    if (!department || !department.created_at) return 0;\n    const createdAt = new Date(department.created_at);\n    const now = new Date();\n    const timeDiff = Math.abs(now - createdAt);\n    const daysSinceCreation = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));\n    return value / daysSinceCreation;\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100vh\">\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100vh\">\n        <Typography style={{ color: 'red', textAlign: 'center' }}>{error}</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box p={3}>\n      <WelcomeCard role={tokenData.user_type} name={tokenData.user_name} image_path={tokenData.image_path} />\n\n      <Grid container spacing={3}>\n        {department ? (\n          <>\n            <Grid item xs={12} md={4}>\n              <StatCard\n                title=\"Total Files\"\n                value={department.file_count}\n                icon={Upload}\n                trend={calculateTrend(department.file_count)}\n              />\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <StatCard\n                title=\"Total Downloads\"\n                value={department.download_total}\n                icon={Download}\n                trend={calculateTrend(department.download_total)}\n              />\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <StatCard\n                title=\"Total department\"\n                value={statistics}\n                icon={Users}\n                trend={calculateTrend(statistics)}\n              />\n            </Grid>\n\n            <Grid item xs={12}>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={chartData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Bar dataKey=\"value\" fill=\"#1976d2\" />\n                </BarChart>\n              </ResponsiveContainer>\n            </Grid>\n          </>\n        ) : (\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100vh\">\n            <Typography style={{ color: 'red', textAlign: 'center' }}>No data Found</Typography>\n          </Box>\n        )}\n      </Grid>\n    </Box>\n  );\n};\n\nexport default DepartmentDashboard;","import React, { ReactNode } from 'react';\nimport {Login, Admin, Layout, LayoutProps, AppBar as RaAppBar, AppBarProps } from 'react-admin';\nimport { Box, Typography } from '@mui/material';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport {roleResources,CustomLayout} from './layout/CustomLayout';\nimport  customDataProvider  from './dataProvider';\nimport LibrarianDashboard from './libriance/LibrarianDashboard';\nimport DepartmentDashboard from './departemnt_head/DepartmentDashboard';\n\n// Custom AppBar component that extends react-admin's AppBar\nconst CustomAppBar = (props: AppBarProps) => (\n  <RaAppBar {...props}>\n    <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\n      <img\n        src=\"./public/hu.jpeg\"\n        alt=\"Logo\"\n        style={{\n          width: 40,\n          height: 40,\n          borderRadius: '50%',\n          marginRight: '10px'\n        }}\n      />\n      <Typography variant=\"h6\">HUDC IR</Typography>\n    </Box>\n  </RaAppBar>\n);\n\n// Custom theme\nconst customTheme = createTheme({\n  palette: {\n    primary: {\n      main: '#1976d2',\n      light: '#42a5f5',\n      dark: '#1565c0',\n      contrastText: '#ffffff',\n    },\n    secondary: {\n      main: '#000000',\n    },\n    background: {\n      default: '#ffffff',\n      paper: '#ffffff',\n    },\n  },\n  typography: {\n    fontFamily: \"Arial, sans-serif\",\n  },\n  components: {\n    MuiAppBar: {\n      styleOverrides: {\n        root: {\n          backgroundColor: '#1976d2',\n        },\n      },\n    },\n  },\n});\n\n\n// App component\nconst App = () => {\n  // librarian,department_head\n  const role =  localStorage.getItem(\"user_type\") || \"department_head\"\n  const resources = roleResources[role] || [];\n\n  if (![\"librarian\", \"department_head\"].includes(role)) {\n    window.location.href = \"/login\";\n  }\n\n  return (\n    <Admin\n      title=\"HUDC IR SYSTEM\"\n      layout={CustomLayout}\n      dataProvider={customDataProvider}\n      darkTheme={null}\n      dashboard={role === \"department_head\" ? DepartmentDashboard : LibrarianDashboard}\n    >\n      {resources}\n    </Admin>\n  );\n  \n};\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport { RouterProvider } from \"react-router\";\nimport { createHashRouter } from \"react-router-dom\";\nimport App  from \"./App\";\n\nconst router = createHashRouter([\n  {\n    path: \"*\",\n    element: <App />,\n  },\n]);\n\nReactDOM.createRoot(document.getElementById(\"root\")!).render(\n  <React.StrictMode>\n    <RouterProvider router={router} />\n  </React.StrictMode>,\n);\n"],"names":["LogoutDialog","open","onClose","onConfirm","jsxs","Dialog","jsx","DialogTitle","DialogContent","Typography","DialogActions","Button","CustomTopBar","role","logoutDialogOpen","setLogoutDialogOpen","useState","sidebarOpen","setSidebarOpen","useSidebarState","handleLogout","Fragment","AppBar","Toolbar","IconButton","MenuIcon","Box","LogOut","_TokenManager","__publicField","token","decoded","jwtDecode","currentTime","message","duration","overlay","errorDiv","countdownDiv","timeLeft","updateCountdown","countdownInterval","refresh","response","apibase","data","error","currentToken","newToken","TokenManager","tokenManager","api","httpClient","fetchUtils.fetchJson","baseDataProvider","simpleRestProvider","customDataProvider","resource","params","json","filterConfig","url","query","queryString","fetchUtils.queryParameters","fullUrl","options","res","formData","_a","_b","id","DepartmentFileCreateToolbar","props","SaveButton","DepartmentFileCreate","notify","useNotify","redirect","useRedirect","handleSubmit","Create","SimpleForm","TextInput","required","FileInput","FileField","DepartmentFileEdit","Edit","DepartmentFileFilter","Filter","TruncatedDescriptionField","record","useRecordContext","description","truncatedText","Tooltip","DepartmentFileList","List","Datagrid","TextField","EditButton","DeleteButton","ViewerDialog","styled","ViewerHeader","ViewerContent","FileViewer","fileUrl","fileName","handleDownload","link","DownloadIcon","CloseIcon","e","SectionTitle","InfoRow","ApprovalFilter","DisapprovalDialog","reason","setReason","handleConfirm","MuiTextField","ApprovalButton","type","useRefresh","loading","setLoading","openDisapprovalDialog","setOpenDisapprovalDialog","handleApproval","updateData","Check","X","ApprovalList","ShowButton","Eye","ApprovalShow","Show","ApprovalShowContent","viewerOpen","setViewerOpen","setFileUrl","fileType","setFileType","handleViewFile","SimpleShowLayout","FileText","Divider","User","Calendar","DateField","validatePasswordMatch","value","allValues","validatePassword","ErrorMessage","CustomToolbar","saving","CircularProgress","UpdateLibriancePassword","useTranslate","setSaving","serverErrors","setServerErrors","transformedData","errorData","fieldErrors","errorMessage","CardContent","UpdateDepartemntPassword","DepartmentFileShowActions","TopToolbar","DepartmentFileShow","useDepartments","departments","setDepartments","useEffect","result","departmentChoices","dept","LibrarianFilter","approved","SelectInput","StatusCell","prop","theme","status","ApprovalStatusField","statusConfig","AlertCircle","Clock","CheckCircle","LibrarianList","LibrarianToolbar","LibrarianForm","isEdit","onSubmit","LibrarianCreate","LibrarianEdit","StyledPaper","Paper","StatusBanner","StatusChip","Chip","ApprovalStatus","statusDetails","Alert","LibrarianFileShow","RedirectResource","roleResources","Resource","Home","librarianFileShow","Lock","ClipboardCheck","FolderPlus","customTheme","createTheme","CustomLayout","ThemeProvider","Layout","StyledCard","Card","StyledCardHeader","CardHeader","StatCard","title","Icon","trend","muiTheme","useTheme","trendColor","WelcomeCard","name","image_path","Avatar","getTokenData","payload","decodedPayload","COLORS","LibrarianDashboard","stats","setStats","tokenData","settokenData","fetchDepartments","gettoken","chartData","Grid","Building","Upload","Download","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Bar","PieChart","Pie","entry","index","Cell","DepartmentDashboard","department","setDepartment","setError","setChartData","statistics","setstatistics","fetchDepartmentData","departmentData","calculateTrend","createdAt","timeDiff","daysSinceCreation","Users","App","resources","Admin","router","createHashRouter","ReactDOM","React","RouterProvider"],"mappings":"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"}